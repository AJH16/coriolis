<div id="comparison">

<!-- TODO: Select builds -->
<!-- TODO: Save Comparison -->
<!-- TODO: Permalink for comparison -->
<!-- TODO: Select faceset -->

  <table>
    <thead  ng-click="sortProperty($event)">
      <tr class="main">
        <th rowspan="2" class="prop" prop="name">Ship</th>
        <th rowspan="2" class="prop" prop="buildName">Build</th>
        <th ng-repeat="f in facets" rowspan="{{f.prop? 2 : 1}}" colspan="{{f.prop? 1: f.props.length}}" prop="{{f.prop}}" ng-class="{prop: f.prop}" ng-bind="f.title"></th>
      </tr>
      <tr>
        <th ng-repeat="f in subFacets | filter:{sub:true}" class="prop" prop="{{f.prop}}" ng-class="{lft: f.start}" test="{{f.start}}" ng-bind="f.label"></th>
      </tr>
    </thead>
    <tbody>
      <tr  class="tr" ng-repeat="b in comparison">
        <td class="tl"><a ui-sref="outfit({shipId: b.id, code: b.code, bn: b.buildName})" ng-bind="b.name"></a></td>
        <td class="tl"><a ui-sref="outfit({shipId: b.id, code: b.code, bn: b.buildName})" ng-bind="b.buildName"></a></td>
        <td ng-repeat="f in subFacets">{{f.fmt(b[f.prop])}} <u>{{f.unit}}</u></td>

      </tr>
      </tbody>
  </table>

  <div ng-repeat="f in facets" class="chart" bar-chart width="500" height="chartHeight" facet="f" data="comparison">
    <h3 ng-click="sort(f.prop || f.props[0])" >{{f.title}}</h3>
  </div>

</div>